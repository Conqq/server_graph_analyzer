<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>MOEX Chart Viewer</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h1>MOEX Chart Viewer</h1>
    <form method="post">
        <label for="tickers">Tickers (comma separated):</label>
        <input type="text" id="tickers" name="tickers" value="{{ tickers }}" placeholder="SBER, GAZP">
        <label for="start">From:</label>
        <input type="date" id="start" name="start" value="{{ start }}">
        <label for="end">To:</label>
        <input type="date" id="end" name="end" value="{{ end }}">
        <label for="chart_type">Chart type:</label>
        <select id="chart_type" name="chart_type">
            <option value="line" {% if chart_type == 'line' %}selected{% endif %}>Line</option>
            <option value="candlestick" {% if chart_type == 'candlestick' %}selected{% endif %}>Candlestick</option>
        </select>
        <label>
            <input type="checkbox" name="elliott" {% if elliott %}checked{% endif %}>
            Elliott waves
        </label>
        <label>
            <input type="checkbox" name="sma" {% if sma %}checked{% endif %}>
            SMA
        </label>
        <label>
            <input type="checkbox" name="ema" {% if ema %}checked{% endif %}>
            EMA
        </label>
        <label>
            <input type="checkbox" name="bollinger" {% if bollinger %}checked{% endif %}>
            Bollinger Bands
        </label>
        <label>
            <input type="checkbox" name="macd" {% if macd %}checked{% endif %}>
            MACD
        </label>
        <label>
            <input type="checkbox" name="rsi" {% if rsi %}checked{% endif %}>
            RSI
        </label>
        <button type="submit">Show</button>
    </form>
    {% for graph in graphs %}
    <div id="graph{{ loop.index }}"></div>
    <script>
        var fig = {{ graph | safe }};
        Plotly.newPlot('graph{{ loop.index }}', fig.data, fig.layout);
    </script>
    {% endfor %}
</body>
</html>
